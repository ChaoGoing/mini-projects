https://juejin.cn/column/7520107642896662543

知识点： 1.发布订阅模式
2.useSyncExternalStore 与 subscribe 实现 react 的自动更新

useSyncExternalStore

```js
function useWindowSize() {
  const width = useSyncExternalStore(
    (callback) => {
      window.addEventListener("resize", callback);
      return () => window.removeEventListener("resize", callback);
    },
    () => {
      console.log("window.innerWidth: ", window.innerWidth);
      return window.innerWidth;
    }
  );
  return width;
}

const width = useWindowSize();
useEffect(() => {
  // width只会在window.innerWidth 变化时才触发
}, [width]);
```

实现：

```js
function useStore(api, selector = identity) {
  const slice = React.useSyncExternalStore(
    api.subscribe,
    () => selector(api.getState()),
    () => selector(api.getInitialState())
  );
  // 3️⃣
  React.useDebugValue(slice);
  return slice;
}
```

3.洋葱模型

a(b(c('params'))) 输出
